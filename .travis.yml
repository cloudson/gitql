language: go

os:
- linux
- osx
- windows

go:  
- "1.12.x"

cache: ccache

before_script: 
- go get -d -v
- ( cd $(go list -f '{{ .Dir }}' github.com/libgit2/git2go) && $OLDPWD/prepare.sh )

script: 
- make test
- env CGO_ENABLED=1 go build --tags "static" -ldflags "-extldflags '-static'" .
